from bluedot.btcomm import BluetoothServer
import board
import neopixel
import time

pixel_pin = board.D21

num_pixels = 210

pixels = neopixel.NeoPixel(pixel_pin, num_pixels)


def leer(data):

	#data = "0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,0,0,0,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,255,82,244,255,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0"


	data = data.split(',')
	indice = 0
	pixels = []

	while indice < len(data):
		grupo = tuple(map(int, data[indice:indice + 3]))
		pixels.append(f'pixels[{indice//3}]={grupo}')
		indice += 3
		imagen = "\n".join(pixels)
		print(imagen)


print("inicia servicio")
s=BluetoothServer(leer)


